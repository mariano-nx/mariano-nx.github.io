<!DOCTYPE html>
<html>
	<head>
		<meta charset="utf-8" />
		<meta name="viewport" content="width=device-width, initial-scale=1" />
		<title> IVR Team Test chat static page #2 </title>
		<style>
			*, ::after, ::before {
    box-sizing: border-box;
}
		</style>
		
		<script>
			  (function (g, e, n, es, ys) {
    g['_genesysJs'] = e;
    g[e] = g[e] || function () {
      (g[e].q = g[e].q || []).push(arguments)
    };
    g[e].t = 1 * new Date();
    g[e].c = es;
    ys = document.createElement('script'); ys.async = 1; ys.src = n; ys.charset = 'utf-8'; document.head.appendChild(ys);
  })(window, 'Genesys', 'https://apps.mypurecloud.com/genesys-bootstrap/genesys.min.js', {
    environment: 'prod',
    deploymentId: 'b9d4aebf-6246-4935-95ef-3dfdd128f461',
	debug:true
  });
			  
			 /* Genesys("subscribe", "Conversations.ready", function(){
			  console.log("Conversation ready")
				  Genesys("command", "Database.set", {
				  messaging: {
					customAttributes: {
					  Test: " Testic" 
							
					}
				  }
				});
			});*/
			
			Genesys("subscribe", "Messenger.ready", function(){
				console.log("Messenger ready")
			});

			Genesys("subscribe", "Launcher.visible", function(){
				const injectCSS = css => {
					let el = document.createElement('style');
					el.type = 'text/css';
					el.innerText = css;
					document.head.appendChild(el);
					return el;
				};

				//injectCSS("body { background-color: #000 }");
				console.log("Inject")
				injectCSS(" @keyframes chat-text-reveal { 0%{opacity:0;} 100%{opacity:1;}} .genesys-app::before { content: 'Online Chat'; padding: 20px 90px 20px 20px  } .genesys-app::after,.genesys-app::before {position: fixed; bottom: 24px; align-items: center; display: flex; margin-right: -68px; margin-left: auto; color: #fff; background-color: #849299; z-index: 99; border-radius: 28px; height: 56px;  opacity: 0; right: 98px; animation: chat-text-reveal .5s .5s forwards ease-out; ");
				/*.genesys-app::before {
    content: "Online Chat";
    padding: 20px 90px 20px 20px;
}

.genesys-app::after, .genesys-app::before {
    position: fixed;
    bottom: 24px;
    align-items: center;
    display: flex
;
    margin-right: -68px;
    margin-left: auto;
    color: #fff;
    background-color: #849299;
    z-index: 99;
    border-radius: 28px;
    height: 56px;
    opacity: 0;
    right: 98px;
    animation: chat-text-reveal .5s .5s forwards ease-out;
}

*/
				// '<style type="text/css">body { background-color: #000 }</style>'

			});
			
			Genesys("subscribe", "MessagingService.ready", function(){
				console.log("Messaging Service Ready");
			});
			
			Genesys("subscribe", "MessagingService.conversationDisconnected", function({data}){
				console.log("*************************");
				console.log(data);
				console.log("*************************");
				alert("Interaction Disconnect!");
			});
			  
		function set_data(){
			  
			  let test = Genesys("command", "Database.set", {
			  messaging: {
				customAttributes: {
				  Test: " Testolereo1111" 
						
				}
			  }
			});

		return Promise.resolve(test);
			
}



function messanger_open(){
	 set_data().then(
		(message) => {
			if (message){
				Genesys("command", "Messenger.open");
			}
			else{
				console.log("Cvrc Mileva");
			}
		}
	);
	 
	 //setTimeout(()=> set_data() ,10000);
	 //set_data();
	 //Genesys("command", "Messenger.open");
	//Genesys("command", "Messenger.open");
}
		</script>
	</head>
	<body>
	
	<h1>IVR Team test chat #2</h1>
	
	</body>
</html>